{% extends 'layout.html' %}

{% block content %}
    <div class="mx-auto col-sm-6 card my-4">
        <div>
            {{ post.user.username }}
            <h2> {{ post.title }} </h2>
            {{ post.body }}
            <img src="{{ post.img_url }}" alt="Post Image" class="img-fluid"/>
        </div>

        <div>
            <button class="btn col-sm-2 {% if post.liked == True %} btn-danger {% else %} btn-outline-danger {% endif %}"
                    id="LikeButton{{ post.id }}" onclick="LikePost({{ post.id }})">Like</button>
            <span id="NumLikes{{ post.id }}"> {{ post.likes|length }} </span> likes
            <span id="NumComments{{ post.id }}"> {{ post.comments|length }} </span> comments
        </div>

        <div class="my-4 mx-auto container" id="commentGroup{{ post.id }}">
            {% for comment in post.comments %}
                <div class="row">
                    <div class="col-sm-3 align-left">
                        <a href="{{ url_for('post.feed_page', username=comment.username) }}"> {{ comment.username }} </a>
                    </div>
                    <div class="col-sm-9 align-left"> {{ comment.comment_body }} </div>
                </div>
            {% endfor %}
        </div>

        <div class="my-4">
            <form method="POST" id="postComment" class="postComment">
                <div class="input-group mx-auto">
                    <input type="text" id="comment_text" name="comment_text" class="form-control" placeholder="Type Comment"
                    aria-label="Type Comment" aria-describedby="basic-addon2">
                    <input type="hidden" id="postID" value="{{ post.id }}">
                    <div class="input-group-append">
                        <input class="btn btn-outline-secondary" type="submit" value="Comment">
                    </div>
                </div>
            </form>
        </div>
        <a class="btn btn-secondary align-left col-sm-4" href="/post/timeline"> Back </a>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="{{ url_for('static', filename='js/post_action.js') }}"></script>

{% endblock %}